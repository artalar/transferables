(function(t,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis<"u"?globalThis:t||self,o(t.Transferables={}))})(this,function(t){"use strict";const o=Object.getPrototypeOf(Int8Array),m=globalThis.AudioData,A=globalThis.VideoFrame,p=globalThis.OffscreenCanvas,O=globalThis.RTCDataChannel;function h(n){return typeof n=="object"&&n!==null||typeof n=="function"}function T(n){return n instanceof o||n instanceof DataView}function u(n){return"ReadableStream"in globalThis&&n instanceof ReadableStream||"WritableStream"in globalThis&&n instanceof WritableStream||"TransformStream"in globalThis&&n instanceof TransformStream}function g(n){return"MessageChannel"in globalThis&&n instanceof MessageChannel}function b(n){return"ArrayBuffer"in globalThis&&n instanceof ArrayBuffer||"MessagePort"in globalThis&&n instanceof MessagePort||"AudioData"in globalThis&&n instanceof m||"ImageBitmap"in globalThis&&n instanceof ImageBitmap||"VideoFrame"in globalThis&&n instanceof A||"OffscreenCanvas"in globalThis&&n instanceof p||"RTCDataChannel"in globalThis&&n instanceof O}function C(n){return Array.from(new Set(n))}function S(n,c=!1,r=1e4){const a=new Set([]);let i=[],l=[n];for(;l.length>0&&r>0;){for(let e of l)if(T(e))a.add(e.buffer);else if(b(e))a.add(e);else if(g(e))a.add(e.port1),a.add(e.port2);else if(c&&u(e))a.add(e);else if(h(e)&&!u(e)){const f=Array.isArray(e)?e:Object.values(e),s=f.length;for(let d=0;d<s;d++)i.push(f[d])}l=i,i=[],r--}return Array.from(a)}function*v(n,c=!1,r=1e4){const a=new Set([]);let i=[n],l=[];for(;i.length>0&&r>0;){for(let e of i){const f=!a.has(e);if(T(e)){if(f){const{buffer:s}=e;a.has(s)||(yield s,a.add(s)),a.add(e)}}else if(g(e))f&&(yield e.port1,a.add(e.port1),yield e.port2,a.add(e.port2));else if(b(e)||c&&u(e))f&&(yield e,a.add(e));else if(!u(e)&&h(e)){const s=Array.isArray(e)?e:Object.values(e),d=s.length;for(let y=0;y<d;y++)l.push(s[y])}}i=l,l=[],r--}return a.clear(),i=null,l=null,null}function D(n,c=!1,r=1e4){let a=[n],i=[];for(;a.length>0&&r>0;){for(let l of a){if(T(l))return!0;if(b(l))return!0;if(g(l))return!0;if(c&&u(l))return!0;if(h(l)&&!u(l)){const e=Array.isArray(l)?l:Object.values(l),f=e.length;for(let s=0;s<f;s++)i.push(e[s])}}a=i,i=[],r--}return a=null,i=null,!1}t.AudioData=m,t.OffscreenCanvas=p,t.RTCDataChannel=O,t.TypedArray=o,t.VideoFrame=A,t.filterOutDuplicates=C,t.getTransferable=v,t.getTransferables=S,t.hasTransferables=D,t.isMessageChannel=g,t.isObject=h,t.isStream=u,t.isTransferable=b,t.isTypedArray=T,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
