(function(t,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(t=typeof globalThis<"u"?globalThis:t||self,c(t.Transferables={}))})(this,function(t){"use strict";const c=Object.getPrototypeOf(Int8Array),b=globalThis.AudioData,m=globalThis.VideoFrame,A=globalThis.OffscreenCanvas,p=globalThis.RTCDataChannel;function h(n){return typeof n=="object"&&n!==null||typeof n=="function"}function T(n){return n instanceof c||n instanceof DataView}function f(n){return"ReadableStream"in globalThis&&n instanceof ReadableStream||"WritableStream"in globalThis&&n instanceof WritableStream||"TransformStream"in globalThis&&n instanceof TransformStream}function g(n){return"MessageChannel"in globalThis&&n instanceof MessageChannel}function y(n){return"ArrayBuffer"in globalThis&&n instanceof ArrayBuffer||"MessagePort"in globalThis&&n instanceof MessagePort||"AudioData"in globalThis&&n instanceof b||"ImageBitmap"in globalThis&&n instanceof ImageBitmap||"VideoFrame"in globalThis&&n instanceof m||"OffscreenCanvas"in globalThis&&n instanceof A||"RTCDataChannel"in globalThis&&n instanceof p}function O(n){return Array.from(new Set(n))}function C(n,d=!1,r=1e4){const a=new Set([]);let l=[],i=[n];for(;i.length>0&&r>0;){for(let e of i)if(T(e))a.add(e.buffer);else if(y(e))a.add(e);else if(g(e))a.add(e.port1),a.add(e.port2);else if(d&&f(e))a.add(e);else if(h(e)&&!f(e)){const s=Array.isArray(e)?e:Object.values(e),u=s.length;for(let o=0;o<u;o++)l.push(s[o])}i=l,l=[],r--}return Array.from(a)}function*S(n,d=!1,r=1e4){const a=new Set([]);let l=[n],i=[];for(;l.length>0&&r>0;){for(let e of l)if(!a.has(e)){if(T(e)){const{buffer:s}=e;if(a.has(s))continue;yield s,a.add(s),a.add(e)}else if(y(e))yield e,a.add(e);else if(g(e)){if(a.has(e.port1))continue;yield e.port1,yield e.port2,a.add(e.port1),a.add(e.port2),a.add(e)}else if(d&&f(e))yield e,a.add(e);else if(!f(e)&&h(e)){const s=Array.isArray(e)?e:Object.values(e),u=s.length;for(let o=0;o<u;o++)i.push(s[o])}}l=i,i=[],r--}return a.clear(),l=null,i=null,null}function v(n,d=!1,r=1e4){let a=[n],l=[];for(;a.length>0&&r>0;){for(let i of a){if(T(i))return!0;if(y(i))return!0;if(g(i))return!0;if(d&&f(i))return!0;if(h(i)&&!f(i)){const e=Array.isArray(i)?i:Object.values(i),s=e.length;for(let u=0;u<s;u++)l.push(e[u])}}a=l,l=[],r--}return a=null,l=null,!1}t.AudioData=b,t.OffscreenCanvas=A,t.RTCDataChannel=p,t.TypedArray=c,t.VideoFrame=m,t.filterOutDuplicates=O,t.getTransferable=S,t.getTransferables=C,t.hasTransferables=v,t.isMessageChannel=g,t.isObject=h,t.isStream=f,t.isTransferable=y,t.isTypedArray=T,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
