"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const y=Object.getPrototypeOf(Int8Array),m=globalThis.AudioData,p=globalThis.VideoFrame,T=globalThis.OffscreenCanvas,b=globalThis.RTCDataChannel;function w(){const a=(()=>{try{const r=new MessageChannel,n={channel:new MessageChannel};structuredClone(n,{transfer:[n.channel.port1,n.channel.port2]});const t={channel:new MessageChannel};r.port1.postMessage(t,{transfer:[t.channel.port1,t.channel.port2]}),r.port1.close()}catch(r){return console.warn(r),!1}return!0})(),o=(()=>{try{const r=new MessageChannel,n={readonly:new ReadableStream,writeonly:new WritableStream,tranformonly:new TransformStream};structuredClone(n,{transfer:[n.readonly,n.writeonly,n.tranformonly]});const t={readonly:new ReadableStream,writeonly:new WritableStream,tranformonly:new TransformStream};r.port1.postMessage(t,{transfer:[t.readonly,t.writeonly,t.tranformonly]}),r.port1.close()}catch(r){return console.warn(r),!1}return!0})();return{channel:a,streams:o}}function c(a){return typeof a=="object"&&a!==null||typeof a=="function"}function d(a){return a instanceof y||a instanceof DataView}function u(a){return"ReadableStream"in globalThis&&a instanceof ReadableStream||"WritableStream"in globalThis&&a instanceof WritableStream||"TransformStream"in globalThis&&a instanceof TransformStream}function h(a){return"MessageChannel"in globalThis&&a instanceof MessageChannel}function g(a){return"ArrayBuffer"in globalThis&&a instanceof ArrayBuffer||"MessagePort"in globalThis&&a instanceof MessagePort||"AudioData"in globalThis&&a instanceof m||"ImageBitmap"in globalThis&&a instanceof ImageBitmap||"VideoFrame"in globalThis&&a instanceof p||"OffscreenCanvas"in globalThis&&a instanceof T||"RTCDataChannel"in globalThis&&a instanceof b}function C(a){return Array.from(new Set(a))}function S(a,o=!1,r=1e4){const n=new Set([]);let t=[],s=[a];for(;s.length>0&&r>0;){for(let e of s)if(d(e))n.add(e.buffer);else if(g(e))n.add(e);else if(h(e))n.add(e.port1),n.add(e.port2);else if(o&&u(e))n.add(e);else if(!u(e)&&c(e)){const l=Array.isArray(e)?e:Object.values(e),i=l.length;for(let f=0;f<i;f++)t.push(l[f])}s=t,t=[],r--}return Array.from(n)}function*A(a,o=!1,r=1e4){const n=new Set([]);let t=[a],s=[];for(;t.length>0&&r>0;){for(let e of t)if(!n.has(e)){if(d(e)){n.add(e);const{buffer:l}=e;if(n.has(l))continue;yield l,n.add(l)}else if(g(e))yield e,n.add(e);else if(h(e)){if(n.add(e),n.has(e.port1)||n.has(e.port2))continue;yield e.port1,yield e.port2,n.add(e.port1),n.add(e.port2)}else if(o&&u(e))yield e,n.add(e);else if(!u(e)&&c(e)){const l=Array.isArray(e)?e:Object.values(e),i=l.length;for(let f=0;f<i;f++)s.push(l[f])}}t=s,s=[],r--}return n.clear(),t=null,s=null,null}function M(a,o=!1,r=1e4){let n=[a],t=[];for(;n.length>0&&r>0;){for(let s of n){if(d(s))return!0;if(g(s))return!0;if(h(s))return!0;if(o&&u(s))return!0;if(c(s)&&!u(s)){const e=Array.isArray(s)?s:Object.values(s),l=e.length;for(let i=0;i<l;i++)t.push(e[i])}}n=t,t=[],r--}return n=null,t=null,!1}exports.AudioData=m;exports.OffscreenCanvas=T;exports.RTCDataChannel=b;exports.TypedArray=y;exports.VideoFrame=p;exports.filterOutDuplicates=C;exports.getTransferable=A;exports.getTransferables=S;exports.hasTransferables=M;exports.isMessageChannel=h;exports.isObject=c;exports.isStream=u;exports.isSupported=w;exports.isTransferable=g;exports.isTypedArray=d;
